{"version":3,"file":"js/7.27862011.js","mappings":"4QACUA,MAAM,Q,GAGHA,MAAM,W,UACPC,EAAAA,EAAAA,GAOM,OAPDD,MAAM,aAAW,EAClBC,EAAAA,EAAAA,GAEK,MAFDD,MAAM,YAAW,iDAGrBC,EAAAA,EAAAA,GAEO,QAFDD,MAAM,eAAc,2CAE1B,K,GAOHA,MAAM,8B,GAWHA,MAAM,gB,UAcNC,EAAAA,EAAAA,GAKE,OALGC,IAAAC,EACAC,IAAI,QACJJ,MAAM,oBACNK,MAAM,KACNC,OAAO,M,qLA9CxBC,EAAAA,EAAAA,IAgEO,OAhEPC,EAgEO,EA/DHC,EAAAA,EAAAA,IAAaC,IAEbT,EAAAA,EAAAA,GAYM,MAZNU,EAYM,CAXFC,GAQAH,EAAAA,EAAAA,IAEEI,EAAA,CADG,cAAY,OAIrBZ,EAAAA,EAAAA,GAoBM,MApBNa,EAoBM,EAnBFL,EAAAA,EAAAA,IAQcM,EAAA,CAPVf,MAAM,eACLgB,GAAE,sBAAwBC,EAAAC,QAC1BC,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAC,OAAOC,SAAS,gBAAiB,oC,mBAEzC,IAES,EAFTf,EAAAA,EAAAA,IAESgB,EAAA,M,kBAFD,IAER,UAFQ,0B,yBAIZxB,EAAAA,EAAAA,GASM,MATNyB,EASM,EANFjB,EAAAA,EAAAA,IAKSgB,EAAA,CAJLE,MAAM,OACLR,QAAOS,EAAAC,a,mBACX,IAED,UAFC,0B,kCAKTpB,EAAAA,EAAAA,IAyBcqB,EAAA,CAxBAX,SAAKY,EAAAA,EAAAA,IAAOH,EAAAI,WAAU,W,CAErBC,OAAKC,EAAAA,EAAAA,KACZ,IAKE,CALFC,GAKE,oCAGKC,aAAWF,EAAAA,EAAAA,KAAC,IACqC,UADrC,wDACqCG,EAAAA,EAAAA,IAAEpB,EAAAqB,SAAO,MAE1DC,QAAML,EAAAA,EAAAA,KACb,IAOS,EAPTzB,EAAAA,EAAAA,IAOSgB,EAAA,CANLzB,MAAM,kBACN2B,MAAM,OACNa,MAAA,GACCrB,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEO,EAAAI,YAAW,K,mBACtB,IAED,UAFC,e,oCArBYf,EAAAwB,yB,yCAkCzB,GACIC,KAAM,cACNC,WAAY,CACRC,WAAWC,EAAAA,EAAAA,KAAqB,IAAM,gCACtCC,YAAYD,EAAAA,EAAAA,KAAqB,IAAM,+BACvCE,aAAaF,EAAAA,EAAAA,KAAqB,IAAM,gCACxCG,QAAQH,EAAAA,EAAAA,KAAqB,IAAM,iCAEvCI,OACI,MAAO,CACH/B,MAAOgC,EAAAA,GAAIC,MACXV,sBAAsB,EACtBH,QAAS,GAEjB,EACAc,QAAS,CACLC,oBACIC,KAAK/B,OAAOC,SAAS,gBAAiB,sCAEtC,MAAM+B,EAAW,IAAIC,gBAAgBC,SAASC,QAAQC,IAAI,YAE1D,GAAIJ,EAAU,CACV,MAAMK,QAAwBC,EAAAA,EAAAA,IAAmBN,GAE7CK,GAAiBE,QACjBR,KAAK/B,OAAOC,SAAS,0BAA0B,GAC/C8B,KAAK/B,OAAOC,SAAS,uBACrB8B,KAAKhB,SAAUyB,EAAAA,EAAAA,IAAWH,GAAiBI,mBAAmB1B,SAC9DgB,KAAKb,sBAAuB,GAE5BwB,MAAM,+BAEd,CACJ,EACAjC,WAAWkC,GAAgB,GACvBZ,KAAKb,sBAAuB,EAC5Ba,KAAK/B,OAAOC,SAAS,gBAAiB,gCAClC0C,GACAZ,KAAKa,QAAQC,KAAM,sBAAqBd,KAAKpC,QAErD,I,UC1GZ,MAAMmD,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://subscriptions/./src/views/Unsubscribe.vue","webpack://subscriptions/./src/views/Unsubscribe.vue?3a65"],"sourcesContent":["<template>\r\n    <main class=\"main\">\r\n        <Preloader />\r\n\r\n        <div class=\"wrapper\">\r\n            <div class=\"container\">\r\n                <h2 class=\"subtitle\">\r\n                    Вы действительно хотите отменить подписку?\r\n                </h2>\r\n                <span class=\"description\">\r\n                    После отмены вам станут недоступны:\r\n                </span>\r\n            </div>\r\n            <NewStories\r\n                :show-title=\"false\"\r\n            />\r\n        </div>\r\n\r\n        <div class=\"buttons__wrapper container\">\r\n            <router-link\r\n                class=\"stay__button\"\r\n                :to=\"`/management/?token=${token}`\"\r\n                @click=\"$store.dispatch('sendUserEvent', 'YardSubManagementStaySubSecond')\"\r\n            >\r\n                <Button>\r\n                    Оставить подписку\r\n                </Button>\r\n            </router-link>\r\n            <div\r\n                class=\"stay__button\"\r\n            >\r\n                <Button\r\n                    color=\"gray\"\r\n                    @click=\"unsubscribe\"\r\n                >\r\n                    Отменить подписку\r\n                </Button>\r\n            </div>\r\n        </div>\r\n        <ModalWindow v-show=\"showUnsubscribeModal\"\r\n                     @click.self=\"closeModal\"\r\n        >\r\n            <template #title>\r\n                <img src=\"../assets/images/modal_success.svg\"\r\n                     alt=\"error\"\r\n                     class=\"modal__header_img\"\r\n                     width=\"50\"\r\n                     height=\"50\"\r\n                />\r\n                Подписка отключена!\r\n            </template>\r\n            <template #description>\r\n                Подписка будет активна до конца расчетного периода&nbsp;{{endDate}}\r\n            </template>\r\n            <template #footer>\r\n                <Button\r\n                    class=\"successModalBtn\"\r\n                    color=\"gray\"\r\n                    small\r\n                    @click=\"closeModal(true)\"\r\n                >\r\n                    Готово\r\n                </Button>\r\n            </template>\r\n        </ModalWindow>\r\n    </main>\r\n</template>\r\n\r\n<script>\r\n    import { API, dateFormat } from \"../components/Constants.js\";\r\n    import { defineAsyncComponent } from \"vue\";\r\n    import { stopAndUnsubscribe } from \"../components/ApiRequests\";\r\n\r\n    export default {\r\n        name: \"Unsubscribe\",\r\n        components: {\r\n            Preloader: defineAsyncComponent(() => import(\"@/components/Preloader.vue\")),\r\n            NewStories: defineAsyncComponent(() => import(\"@/components/NewStories.vue\")),\r\n            ModalWindow: defineAsyncComponent(() => import(\"@/components/ModalWindow.vue\")),\r\n            Button: defineAsyncComponent(() => import(\"@/components/Button.vue\")),\r\n        },\r\n        data() {\r\n            return {\r\n                token: API.TOKEN,\r\n                showUnsubscribeModal: false,\r\n                endDate: \"\",\r\n            };\r\n        },\r\n        methods: {\r\n            async unsubscribe() {\r\n                this.$store.dispatch(\"sendUserEvent\", \"YardSubManagementCancelButtonFinal\");\r\n                // reasonId передается как query параметр на предыдущем шаге\r\n                const reasonId = new URLSearchParams(location.search).get(\"reasonId\");\r\n\r\n                if (reasonId) {\r\n                    const unsubscribeInfo = await stopAndUnsubscribe(reasonId);\r\n\r\n                    if (unsubscribeInfo?.result) {\r\n                        this.$store.dispatch(\"changePayButtonDisplay\", false);\r\n                        this.$store.dispatch(\"getSubscriptionInfo\");\r\n                        this.endDate = dateFormat(unsubscribeInfo?.subscriptionModel?.endDate);\r\n                        this.showUnsubscribeModal = true;\r\n                    } else {\r\n                        alert(\"Не удалось отменить подписку\");\r\n                    }\r\n                }\r\n            },\r\n            closeModal(unsubscribing = false) {\r\n                this.showUnsubscribeModal = false;\r\n                this.$store.dispatch(\"sendUserEvent\", \"YardSubManagementCancel_done\");\r\n                if (unsubscribing) {\r\n                    this.$router.push(`/management/?token=${this.token}`);\r\n                }\r\n            },\r\n        },\r\n    };\r\n</script>\r\n\r\n<style scoped>\r\n@import \"../assets/main.css\";\r\n\r\n.wrapper {\r\n  display: flex;\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.main {\r\n  justify-content: space-between;\r\n}\r\n\r\n.subtitle {\r\n  width: 100%;\r\n  margin-top: 58px;\r\n  font-weight: 600;\r\n  font-size: 18px;\r\n  line-height: 20px;\r\n  letter-spacing: -0.02em;\r\n}\r\n\r\n.description {\r\n  width: 100%;\r\n  margin: 16px 0 0;\r\n  font-weight: 500;\r\n  font-size: 16px;\r\n  line-height: 20px;\r\n  color: #707583;\r\n}\r\n\r\n.buttons__wrapper {\r\n  width: 100%;\r\n  justify-content: center;\r\n  padding-bottom: 42px;\r\n}\r\n\r\n.stay__button {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  text-decoration: none;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.successModalBtn {\r\n  display: flex;\r\n  margin: auto;\r\n}\r\n\r\n.modal__header_img {\r\n  width: 50px;\r\n  height: 50px;\r\n  margin: 0 auto 16px;\r\n}\r\n</style>","import { render } from \"./Unsubscribe.vue?vue&type=template&id=4ae3b03c&scoped=true\"\nimport script from \"./Unsubscribe.vue?vue&type=script&lang=js\"\nexport * from \"./Unsubscribe.vue?vue&type=script&lang=js\"\n\nimport \"./Unsubscribe.vue?vue&type=style&index=0&id=4ae3b03c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4ae3b03c\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","src","_imports_0","alt","width","height","_createElementBlock","_hoisted_1","_createVNode","_component_Preloader","_hoisted_2","_hoisted_3","_component_NewStories","_hoisted_4","_component_router_link","to","$data","token","onClick","_cache","$event","_ctx","$store","dispatch","_component_Button","_hoisted_5","color","$options","unsubscribe","_component_ModalWindow","_withModifiers","closeModal","title","_withCtx","_hoisted_6","description","_toDisplayString","endDate","footer","small","showUnsubscribeModal","name","components","Preloader","defineAsyncComponent","NewStories","ModalWindow","Button","data","API","TOKEN","methods","async","this","reasonId","URLSearchParams","location","search","get","unsubscribeInfo","stopAndUnsubscribe","result","dateFormat","subscriptionModel","alert","unsubscribing","$router","push","__exports__","render"],"sourceRoot":""}